---
import type { PostType } from "../../types";

interface Props {
  post: PostType;
}

const { post } = Astro.props;
---

<a
  href={post.collection + "/" + post.id}
  class="flex pt-4 flex-col gap-14 p-4 text-secondary bg-[var(--item-color)] justify-between relative"
  style={`--item-color: ${post.data.color || "#000"};`}
  aria-label={post.data.title}
  title={post.data.title}
>
  <!-- Title & date -->
  <div class="flex flex-col">
    <h2 class="text-xl md:text-2xl font-sc text-balance leading-6">
      {post.data.title}
    </h2>
    <p class="text-sm tracking-wide font-light">
      {
        post.data.published.toLocaleDateString("fr-FR", {
          year: "numeric",
          month: "2-digit",
          day: "2-digit"
        })
      }
    </p>
  </div>

  <!-- Image & description -->
  <div class="flex flex-row gap-2 items-start md:items-end">
    {
      post.data.image && (
        <img
          src={post.data.image}
          alt={post.data.title}
          class="aspect-square w-18 md:w-32 mix-blend-lighten object-cover pt-0.5"
        />
      )
    }

    <div class="relative">
      <p class="text-balance leading-4.5 max-w-prose">
        {post.data.description.slice(0, 300)}
        {post.data.description.length > 300 ? "â€¦" : ""}
      </p>
      <div
        class="absolute inset-0 bg-gradient-to-tl from-[var(--item-color)]/70"
      >
      </div>
    </div>
  </div>
</a>
